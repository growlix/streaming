{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Python: Current File",
            "type": "python",
            "request": "launch",
            "program": "${file}",
            "console": "integratedTerminal",
            "justMyCode": true,
        },        
        {
            "name": "subset",
            "type": "python",
            "request": "launch",
            "program": "${file}",
            "console": "integratedTerminal",
            "justMyCode": true,
            "args": [
                "--streaming_remote",
                "s3://mosaicml-internal-dataset-the-pile/mds/2/",
                "--streaming_local",
                "/nfs/streaming_datasets/pile/",
                "--split",
                "train",
                "--save_dir",
                "/nfs/subsets/pile/github",
                "--subsets",
                "github"
            ]
        },
        {
            "name": "make_suffix_array",
            "type": "python",
            "request": "launch",
            "program": "${file}",
            "console": "integratedTerminal",
            "cwd": "/data-dedupe/streaming/scripts/deduplication/exact",
            "justMyCode": true,
            "args": [
                "~/preprocessed/c4.val"
            ]
        },
        {
            "name": "write_approx_deduplicate_data",
            "type": "python",
            "request": "launch",
            "program": "scripts/deduplication/approximate/write_and_prune_dataset.py",
            "console": "integratedTerminal",
            "justMyCode": true,
            "host": "127.0.0.1",
            "args": [
                "--streaming_remote",
                "s3://mosaicml-internal-dataset-the-pile/mds/2/",
                "--streaming_local",
                "/nfs/streaming_datasets/pile/",
                "--split",
                "train",
                "--name",
                "pile",
                "--save_dir",
                "/nfs/pruned_datasets/pile/keep_0pt4",
                "--similarity_file",
                "/nfs/similarities/pile_train_max_similarity.pkl",
                "--keep_fraction",
                ".4"
            ]
        },        
        {
            "name": "write_approx_deduplicate_c4",
            "type": "python",
            "request": "launch",
            "program": "scripts/deduplication/approximate/write_and_prune_dataset.py",
            "console": "integratedTerminal",
            "justMyCode": true,
            "host": "127.0.0.1",
            "args": [
                "--streaming_remote",
                "s3://mosaicml-internal-dataset-c4/mds/2/",
                "--streaming_local",
                "/nfs/streaming_datasets/c4/",
                "--split",
                "train",
                "--name",
                "c4",
                "--save_dir",
                "/nfs/pruned_datasets/c4/keep_0pt7",
                "--similarity_file",
                "/nfs/similarities/c4_train_max_similarity.pkl",
                "--keep_fraction",
                ".7"
            ]
        },        
        {
            "name": "Python: Current File",
            "type": "python",
            "request": "launch",
            "program": "${file}",
            "console": "integratedTerminal",
            "justMyCode": true,
            "args": [
                "--streaming_remote",
                "s3://mosaicml-internal-dataset-the-pile/mds/2/",
                "--streaming_local",
                "/tmp/pile",
                "--save_dir",
                "~/preprocessed",
                "--split",
                "train",
                "--name",
                "pile"
            ]
        },
        {
            "name": "get_embeddings raw dataparallel pile",
            "type": "python",
            "request": "launch",
            "program": "scripts/deduplication/approximate/get_embeddings.py",
            "console": "integratedTerminal",
            "justMyCode": true,
            "args": [
                "--streaming_remote",
                "s3://mosaicml-internal-dataset-the-pile/mds/2/",
                "--streaming_local",
                "/tmp/pile",
                "--save_dir",
                "~/preprocessed",
                "--split",
                "val",
                "--batch_size_dataloader",
                "1280",
                "--batch_size_inference",
                "2560",
            ]
        },
        {
            "name": "get_embeddings raw multiprocessing pile",
            "type": "python",
            "request": "launch",
            "program": "scripts/deduplication/approximate/get_embeddings.py",
            "console": "integratedTerminal",
            "justMyCode": true,
            "args": [
                "--streaming_remote",
                "s3://mosaicml-internal-dataset-the-pile/mds/2/",
                "--streaming_local",
                "/tmp/pile",
                "--save_dir",
                "~/preprocessed",
                "--split",
                "val",
                "--parallel_strategy",
                "mp"
            ]
        },
        {
            "name": "Crate bytes and offsets",
            "type": "python",
            "request": "launch",
            "program": "${file}",
            "console": "integratedTerminal",
            "justMyCode": true,
            "args": [
                "--streaming_remote",
                "s3://mosaicml-internal-dataset-c4/mds/2/" ,
                "--streaming_local",
                "/tmp/c4",
                "--save_dir",
                "~/preprocessed",
                "--split",
                "val",
                "--name",
                "c4"
            ]
        },        
        {
            "name": "wiki40b",
            "type": "python",
            "request": "launch",
            "program": "${file}",
            "console": "integratedTerminal",
            "justMyCode": true,
            "args": [
                "--data_dir",
                "/root/preprocessed",
                "--save_dir",
                "/root/preprocessed",
                "--split",
                "test",
                "--name",
                "wiki40b"
            ]
        },
        {
            "name": "wiki40b_finish_dedup",
            "type": "python",
            "request": "launch",
            "program": "${file}",
            "console": "integratedTerminal",
            "justMyCode": true,
            "args": [
                "--data_dir",
                "~/tensorflow_datasets/",
                "--save_dir",
                "/tmp/tfds_wiki40b",
                "--name",
                "wiki40b",
                "--split",
                "test",
                "--suffixarray_dir",
                "scripts/deduplication/exact/deduplicate-text-datasets/data",
                "--remove",
                "/tmp/wiki40b.test.remove.byterange"
            ]
        },
        {
            "name": "pile_val_finish_dedup",
            "type": "python",
            "request": "launch",
            "program": "${file}",
            "console": "integratedTerminal",
            "justMyCode": true,
            "args": [
                "--streaming_local",
                "/tmp/pile",
                "--data_dir",
                "~/preprocessed",
                "--save_dir",
                "~/pile_dedupe",
                "--name",
                "pile",
                "--split",
                "val",
                "--suffixarray_dir",
                "~/preprocessed",
                "--remove",
                "~/preprocessed/pile.val.remove.byterange"
            ]
        },
    ]
}